<!DOCTYPE html>    
<head>
    <meta charset="utf-8">
    <title>fabric.js-simple text display</title>
  
  <!-- Get version 1.1.0 of Fabric.js from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.1.0/fabric.all.min.js" ></script>
 
  <!-- Get the highest 1.X version of jQuery from CDN. Required for ready() function. -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
  <style>
    #ratio-2 {
      display: none;
    }
  </style>
 
<body>
    <!-- A canvas tag is required or 
       Fabric.js doesn't know where to draw. -->
    <canvas id="c" style="border:1px solid black;" ></canvas>
    <button id="clear-canvas">Clear</button>
    <button id="save-canvas">Save</button>
    <img src="ratio-2.svg" id="ratio-2">
</body>
 
<script>
  // Place script tags at the bottom of the page.
  // That way progressive page rendering and 
  // downloads are not blocked.
 
  // Run only when HTML is loaded and 
  // DOM properly initialized (courtesy jquery)
  $(function () {
    function add_svg(canvas, img) {
      canvas.add(img);
      canvas.centerObject(img);
      canvas.renderAll();
    }

    // Obtain a canvas drawing surface from fabric.js
    var canvas = new fabric.Canvas('c');
    canvas.isDrawingMode = true;

    var imgElement = document.getElementById('ratio-2');
    var imgInstance = new fabric.Image(imgElement, {
      opacity: 1,
      scaleX: 1.0,
      scaleY: 1.0
    });
    canvas.setHeight(imgInstance.height * imgInstance.scaleX);
    canvas.setWidth(imgInstance.width * imgInstance.scaleY);
  
    // Attach it to the canvas object, then (re)display
    // the canvas.  
//    add_svg(canvas, imgInstance);
    
    var clearEl = document.getElementById('clear-canvas');
    clearEl.onclick = function() { canvas.clear(); add_svg(canvas, imgInstance); };

    var saveEl = document.getElementById('save-canvas');
    saveEl.onclick = function() { console.log(JSON.stringify(canvas)); };

    canvas.on('path:created', function(e) {
     console.log(JSON.stringify(canvas));
    });
  });

</script>
    
</head>
 
 
</html>
